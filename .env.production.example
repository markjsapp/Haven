# Haven Production Environment
# Copy to .env.production and fill in all values.
# Then: docker compose -f docker-compose.prod.yml --env-file .env.production up -d

# ─── Domain ─────────────────────────────────────────────
# Your domain name (DNS A record must point to this server's IP)
HAVEN_DOMAIN=chat.example.com
# Email for Let's Encrypt certificate notifications
ACME_EMAIL=you@example.com

# ─── Database ───────────────────────────────────────────
POSTGRES_USER=haven
POSTGRES_PASSWORD=          # Generate: openssl rand -hex 24
POSTGRES_DB=haven

# ─── Redis ──────────────────────────────────────────────
REDIS_PASSWORD=             # Generate: openssl rand -hex 24

# ─── Secrets ────────────────────────────────────────────
JWT_SECRET=                 # Generate: openssl rand -hex 32
STORAGE_ENCRYPTION_KEY=     # Generate: openssl rand -hex 32

# ─── JWT Expiry ─────────────────────────────────────────
JWT_EXPIRY_HOURS=24
REFRESH_TOKEN_EXPIRY_DAYS=30

# ─── LiveKit (voice/video) ──────────────────────────────
# LIVEKIT_URL is set automatically in docker-compose.prod.yml (ws://livekit:7880)
# LIVEKIT_CLIENT_URL is set automatically in docker-compose.prod.yml (wss://$HAVEN_DOMAIN/livekit/)
LIVEKIT_API_KEY=            # Generate: openssl rand -hex 12
LIVEKIT_API_SECRET=         # Generate: openssl rand -base64 32

# ─── Registration ───────────────────────────────────────
REGISTRATION_INVITE_ONLY=true
REGISTRATION_INVITES_PER_USER=3

# ─── Anti-Abuse: Cloudflare Turnstile (CAPTCHA) ────
# Get keys at https://dash.cloudflare.com → Turnstile
# Leave empty to disable (PoW-only registration)
TURNSTILE_SITE_KEY=
TURNSTILE_SECRET_KEY=

# ─── Rate Limiting ──────────────────────────────────────
MAX_REQUESTS_PER_MINUTE=120
MAX_WS_CONNECTIONS_PER_USER=5

# ─── Storage ────────────────────────────────────────────
MAX_UPLOAD_SIZE_BYTES=524288000

# ─── Data Retention ─────────────────────────────────────
AUDIT_LOG_RETENTION_DAYS=90
RESOLVED_REPORT_RETENTION_DAYS=180
